<h2>Report Details</h2>
<p>Name : <%= @report.name %></p>
<p>Date beg: <%= @report.date_beg %></p>
<p>Date end: <%= @report.date_end %></p>

<br>
<br>
<br>
<%= form_for(@report) do |f| %>
  <div style="border: solid black 1px">
    <%= f.label :date_beg %>
    <br>
    <%= f.date_field :date_beg %>
    <br>
    <%= f.label :date_end %>
    <br>
    <%= f.date_field :date_end %>
    <br>
    Current scale : <%= @report.scale %><br>
    day <%= f.radio_button(:scale, "day") %>
    <br>
    week <%= f.radio_button(:scale, "week") %>
    <br>
    <%= f.submit "Update Report" %>
  </div>
<% end %>




<br>
<br>
array: <%= @test %>
<br>
from: <%= @from %>
<br>
To: <%= @to %>
<br>
<br>
<!-- <div id="complaint-data" style="display:none"> -->
<%= @complaint_date_hash.each do |c| %>
    <br>
    <br>
    <%= c %>
  <br>
<% end %>
<!-- </div> -->


<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
Complaint Array:<%= @complaint_array %>
<br>
Complaint Hash:<%= @complaint_hash %>

<div style="width:100%">
  <canvas id="complaint-linechart-canvas" height="150" width="600"></canvas>
</div>
<div style="width:50%;">
  <canvas id="complaint-piechart-canvas" width="200" height="200"/>
</div>

<br>
<br>
<br>
Action Array:<%= @action_array %>
<br>
Action Hash:<%= @action_hash %>
<div style="width:50%;">
  <canvas id="action-piechart-canvas" width="200" height="200"/>
</div>
<br>
<br>
<br>
Style Array:<%= @style_array %>
<br>
Style Hash:<%= @style_hash %>
<br>
<br>
<br>
Product Array:<%= @product_array %>
<br>
Product Hash:<%= @product_hash %>
<br>
<br>
<br>


<br>
<br>
<%= link_to "back", dashboard_path %>

<script>
  $(document).ready(function(){
    var colors = ['#0085c3','#7ab800','#f2af00','#dc5034','#71c6c1','#ce1126','#009bbb','#b7295a'];

    var complaint_array = <%= @complaint_array.to_json.html_safe %>;
    var complaint_hash = <%= @complaint_hash.to_json.html_safe %>;
    create_chart(complaint_array, complaint_hash, "complaint-piechart-canvas");

    var action_array = <%= @action_array.to_json.html_safe %>;
    var action_hash = <%= @action_hash.to_json.html_safe %>;
    create_chart(action_array, action_hash, "action-piechart-canvas");




    var complaint_date_hash = <%= @complaint_date_hash.to_json.html_safe %>;
    console.log(complaint_date_hash);
    for(var key in complaint_date_hash){
      console.log(key);
      for(var date in complaint_date_hash[key]){
        console.log(date + " : " + complaint_date_hash[key][date]) ;
      }
    }

    ////////////////////////Section for graphs and charts

    //////LineGraph
    var lineChartData_complaint = {
      labels : ["January","February","March","April","May","June","July"],
      datasets : [
        {
          label: "My First dataset",
          strokeColor : "rgba(220,220,220,1)",
          pointColor : "rgba(220,220,220,1)",
          pointStrokeColor : "#fff",
          pointHighlightFill : "#fff",
          pointHighlightStroke : "rgba(220,220,220,1)",
          data : [4,2,6,4,5,6,7]
        }
      ]
    }
    var ctx = document.getElementById("complaint-linechart-canvas").getContext("2d");
		window.myLine = new Chart(ctx).Line(lineChartData_complaint, {
			responsive: true,
      bezierCurve : false,
      datasetFill : false
		});

    //////PieChart
    function create_chart(array, hash, id){
      var in_function_array = [];
      var i = 0;
      for(var key in hash){
        in_function_array.push({
          value: hash[key],
          color:colors[i],
          highlight: "grey",
          label: key
        });
        i++;
      }
      var ctx = document.getElementById(id).getContext("2d");
      window.myPie = new Chart(ctx).Pie(in_function_array, {
      });
    }


  });

</script>
